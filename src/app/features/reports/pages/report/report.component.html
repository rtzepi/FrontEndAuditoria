<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

<div class="container">
    <button class="btn-back" (click)="goBack()">
        <span class="material-icons">arrow_back</span>
        Volver
    </button>

    <div class="header">
        <h2>Generacion de reportes</h2>
    </div>

    <div *ngIf="isLoading" class="loading-spinner">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
</div>


<form [formGroup]="reportForm" (ngSubmit)="onSubmit()" class="product-form">
    <!-- Tipo de reporte -->
    <div class="form-row">
        <div class="form-group">
            <label>Tipo de reporte<span class="required">*</span></label>
            <select id="reportType" formControlName="reportType">
                <option value="">Seleccione un estado</option>
                <option value="1">Ventas</option>
                <option value="2">Pedidos</option>
                <option value="3">Productos más vendidos</option>
            </select>
        </div>

        <!-- Frecuencia -->
        <div class="form-group">
            <label>Desde<span class="required">*</span></label>
            <input  type="date" formControlName="startDate" class="w-full border rounded p-2" />
        </div>
        <div class="form-group">
            <label>Hasta<span class="required">*</span></label>
            <input  type="date" formControlName="endDate" class="w-full border rounded p-2" />
        </div>
        <div class="form-group">
            <label>Formato<span class="required">*</span></label>
            <select id="reportType" formControlName="outputFormat">
                <option value="">Seleccione el Formato</option>
                <option value="1">PDF</option>
            </select>
        </div>
    </div>


    <div class="form-row">
        <div class="form-group" *ngIf="reportForm.get('reportType')!.value === '2'">
            <label>Estado:<span class="required">*</span></label>
            <select id="reportType" formControlName="status">
                <option value="">Selecione un estado</option>
                <option value="0">Todos los estados</option>
                <option value="C">Canceladas</option>
                <option value="V">Confirmadas</option>
                <option value="S">Enviadas</option>
                <option value="R">Recibidos</option>
                <option value="P">Pendientes</option>
            </select>
        </div>
        <div class="form-group" *ngIf="reportForm.get('reportType')!.value === '2'">
            <label>Proveedor:<span class="required">*</span></label>
            <select id="reportType" formControlName="idSupplier">
                <option value="">Selecione proveedor</option>
                <option value="0">Todos los proveedores</option>
                <option *ngFor="let supplier of suppliers" [value]="supplier.idSupplier">
                    {{ supplier.nameSupplier }}
                </option>
            </select>
        </div>

        <div class="form-group" *ngIf="reportForm.get('reportType')!.value === '3'">
            <label>Limite:<span class="required">*</span></label>
            <select id="reportType" formControlName="limit">
                <option value="">Selecione la cantidad de productos</option>
                <option value="10">10 productos</option>
                <option value="30">30 productos</option>
                <option value="50">50 productos</option>
                <option value="70">70 productos</option>
                <option value="90">90 productos</option>
                <option value="100">100 productos</option>
            </select>
        </div>

    </div>



    <!-- Botón -->
    <div class="text-right">
        <button type="submit" [disabled]="reportForm.invalid" class="btn-submit"z>
            Generar Reporte
        </button>
    </div>
</form>